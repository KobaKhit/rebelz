<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
  <!-- Include the Netlify Identity Widget for authentication -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <!-- Enable debug mode -->
  <script>
    window.CMS_MANUAL_INIT = true;
  </script>
</head>
<body>
  <!-- Include the script that builds the page and powers Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <!-- Custom preview styles -->
  <script>
    // CMS.registerPreviewStyle("https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css");
    
    // Register custom preview style to match your website's dark theme
    CMS.registerPreviewStyle(
      `
      :root {
        --primary: #e63946;
        --primary-hover: #c1121f;
        --primary-focus: rgba(230, 57, 70, 0.25);
        --background-color: #000000;
        --card-background-color: #121212;
        --card-sectionning-background-color: #1e1e1e;
        --card-border-color: #333;
        --color: #ffffff;
        --h1-color: #ffffff;
        --h2-color: #e63946;
        --h3-color: #e63946;
        --h4-color: #ffffff;
        --h5-color: #ffffff;
        --h6-color: #ffffff;
      }
      
      body {
        background-color: var(--background-color);
        color: var(--color);
        font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu", "Cantarell", "Noto Sans", sans-serif;
      }
      
      .coach-item, .player-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        background-color: var(--card-sectionning-background-color);
        padding: 1rem;
        margin-bottom: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid var(--card-border-color);
        transition: transform 0.2s, box-shadow 0.2s;
        font-size: 0.9rem;
      }
      
      .coach-image, .player-image {
        width: 70px;
        height: 70px;
        object-fit: cover;
        flex-shrink: 0;
        border: 2px solid var(--primary);
      }
      
      .coach-image {
        border-radius: 50%;
      }
      
      .player-image {
        width: 60px;
        height: 60px;
        border-radius: 0.25rem;
      }
      
      .info {
        flex-grow: 1;
      }
      
      .name {
        font-weight: bold;
        margin-bottom: 0.25rem;
        color: #ffffff;
        font-size: 0.95rem;
      }
      
      .title {
        font-style: italic;
        color: #aaa;
        margin-bottom: 0.25rem;
        font-size: 0.8rem;
      }
      
      .bio {
        font-size: 0.8rem;
        color: #dddddd;
        line-height: 1.3;
      }
      
      .player-item .name {
        font-size: 0.9rem;
        margin-bottom: 0.15rem;
      }
      
      .player-item .title {
        font-size: 0.75rem;
        margin-bottom: 0.15rem;
      }
      
      .player-item .bio {
        font-size: 0.75rem;
        line-height: 1.2;
      }
      
      article {
        margin: 0 0 1rem 0;
        padding: 1rem;
        background-color: var(--card-background-color);
        border: 1px solid var(--card-border-color);
        border-radius: 0.25rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      }
      
      article header {
        margin-bottom: 0rem;
        padding-bottom: 0.5rem;
        border-bottom: none;
        text-align: center;
        background-color: transparent;
      }
      
      article header h2 {
        margin: 0;
        color: var(--primary);
        text-transform: uppercase;
        letter-spacing: 1px;
        display: inline-block;
        padding: 10px 0 10px;
        position: relative;
      }
      
      .team-header {
        background-color: var(--primary);
        color: white;
        padding: 0.5rem 1rem;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
        border-radius: 0.25rem 0.25rem 0 0;
      }
      
      .team-players {
        background-color: var(--card-sectionning-background-color);
        border: 1px solid var(--card-border-color);
        border-top: none;
        border-radius: 0 0 0.25rem 0.25rem;
        padding: 0.75rem;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }
      `,
      { raw: true }
    );
    
    // Register preview templates for coaches and players
    const CoachesPreview = createClass({
      render: function() {
        const entry = this.props.entry;
        const coaches = entry.getIn(['data', 'coaches']) || [];
        
        return h('article', {},
          h('header', {}, h('h2', {}, 'Coaches')),
          h('div', {}, 
            coaches.map((coach, index) => {
              return h('div', { key: index, className: 'coach-item' },
                h('img', { 
                  src: coach.getIn(['image']), 
                  alt: coach.getIn(['name']), 
                  className: 'coach-image' 
                }),
                h('div', { className: 'info' },
                  h('div', { className: 'name' }, coach.getIn(['name'])),
                  h('div', { className: 'bio' }, coach.getIn(['bio']))
                )
              );
            })
          )
        );
      }
    });
    
    const PlayersPreview = createClass({
      render: function() {
        const entry = this.props.entry;
        const teams = entry.getIn(['data', 'teams']) || [];
        
        return h('article', {},
          h('header', {}, h('h2', {}, 'Players')),
          h('div', {}, 
            teams.map((team, teamIndex) => {
              return h('div', { key: teamIndex },
                h('div', { className: 'team-header' }, team.getIn(['name'])),
                h('div', { className: 'team-players' },
                  (team.getIn(['players']) || []).map((player, playerIndex) => {
                    return h('div', { key: playerIndex, className: 'player-item' },
                      h('img', { 
                        src: player.getIn(['image']), 
                        alt: player.getIn(['name']), 
                        className: 'player-image' 
                      }),
                      h('div', { className: 'info' },
                        h('div', { className: 'name' }, player.getIn(['name'])),
                        h('div', { className: 'title' }, 
                          player.getIn(['position']) + ' | ' + player.getIn(['height'])
                        ),
                        h('div', { className: 'bio' }, player.getIn(['bio']))
                      )
                    );
                  })
                )
              );
            })
          )
        );
      }
    });
    
    CMS.registerPreviewTemplate('coaches-list', CoachesPreview);
    CMS.registerPreviewTemplate('players-list', PlayersPreview);
  </script>
</body>
</html> 